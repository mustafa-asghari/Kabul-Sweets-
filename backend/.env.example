# =============================================================================
# Kabul Sweets Backend â€” Environment Configuration
# =============================================================================
# Copy this file to .env and fill in the values.

# Application
APP_NAME=Kabul Sweets
APP_ENV=development
DEBUG=true
SECRET_KEY=change-me-to-a-random-secret-key-at-least-32-chars
API_PREFIX=/api/v1

# Server
HOST=0.0.0.0
PORT=8000

# Database credentials (used by Docker PostgreSQL service)
POSTGRES_USER=your_postgres_user
POSTGRES_PASSWORD=your_postgres_password
POSTGRES_DB=your_postgres_db

# Database (PostgreSQL)
DATABASE_URL=postgresql+asyncpg://your_postgres_user:your_postgres_password@your-db-host:5432/your_postgres_db
DATABASE_ECHO=false

# Docker-internal service URLs (used by docker-compose services)
DOCKER_DATABASE_URL=postgresql+asyncpg://your_postgres_user:your_postgres_password@db:5432/your_postgres_db

# Redis
REDIS_URL=redis://your-redis-host:6379/0
DOCKER_REDIS_URL=redis://redis:6379/0

# Celery (background jobs)
CELERY_BROKER_URL=redis://your-redis-host:6379/1
CELERY_RESULT_BACKEND=redis://your-redis-host:6379/2
CELERY_TASK_ALWAYS_EAGER=false
DOCKER_CELERY_BROKER_URL=redis://redis:6379/1
DOCKER_CELERY_RESULT_BACKEND=redis://redis:6379/2

# JWT Auth
JWT_SECRET_KEY=change-me-to-another-secret-key
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
PASSWORD_RESET_TOKEN_EXPIRE_MINUTES=30

# Telegram Bot (Admin Alerts & Actions)
TELEGRAM_BOT_TOKEN=your-telegram-bot-token-here
TELEGRAM_WEBHOOK_SECRET=generate-a-random-hex-secret-here
# Comma-separated chat ids (supports negative group IDs), e.g. -1001234567890,987654321
TELEGRAM_ADMIN_CHAT_IDS=your-chat-id-here
# Optional: admin/staff email used as actor for Telegram approve/reject actions
TELEGRAM_ACTING_ADMIN_EMAIL=admin@yourdomain.com
ADMIN_FRONTEND_URL=https://admin.yourdomain.com
FRONTEND_URL=https://yourdomain.com
BUSINESS_TIMEZONE=Australia/Brisbane

# CORS
CORS_ORIGINS=["https://yourdomain.com","https://admin.yourdomain.com"]

# Stripe Payments
STRIPE_SECRET_KEY=sk_test_your_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_secret_here
STRIPE_PUBLISHABLE_KEY=pk_test_your_key_here
STRIPE_SUCCESS_URL=https://yourdomain.com/order/success?session_id={CHECKOUT_SESSION_ID}
STRIPE_CANCEL_URL=https://yourdomain.com/order/cancel

# Email (SMTP)
SMTP_HOST=your-smtp-host
SMTP_PORT=587
SMTP_USER=your-smtp-username
SMTP_PASSWORD=your-smtp-password
SMTP_FROM_EMAIL=your-from-email
SMTP_FROM_NAME=your-from-name
SMTP_TIMEOUT_SECONDS=15

# Email (Mailgun API - optional, takes priority over SMTP when configured)
MAILGUN_API_KEY=your-mailgun-api-key
MAILGUN_DOMAIN=your-mailgun-domain
MAILGUN_BASE_URL=https://api.mailgun.net
MAILGUN_FROM_EMAIL=postmaster@your-mailgun-domain
MAILGUN_FROM_NAME=your-from-name
MAILGUN_TIMEOUT_SECONDS=15

# Gemini (Image + Product Description generation)
GEMINI_API_KEY=your-gemini-api-key
GEMINI_IMAGE_MODEL=gemini-3-pro-image-preview
GEMINI_TEXT_MODEL=gemini-3-pro-preview

# XGBoost (Cake Price Prediction)
ML_USE_XGBOOST=true
XGBOOST_MODEL_PATH=/tmp/kabul_sweets_models/cake_price_xgboost.json
XGBOOST_MIN_TRAINING_SAMPLES=30

# Monitoring
SENTRY_DSN=
APP_VERSION=0.1.0

# Frontend/API URLs (required by Docker frontend/admin services)
NEXT_PUBLIC_API_BASE_URL=https://api.yourdomain.com
INTERNAL_API_BASE_URL=http://your-api-internal-host:8000
API_URL=http://your-api-internal-host:8000/api/v1

# Seed users (optional; only used by `python -m app.seed`)
SEED_ADMIN_EMAIL=
SEED_ADMIN_PASSWORD=
SEED_ADMIN_FULL_NAME=
SEED_ADMIN_PHONE=
SEED_DEMO_CUSTOMERS_JSON=[]

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60

# Logging
LOG_LEVEL=INFO
